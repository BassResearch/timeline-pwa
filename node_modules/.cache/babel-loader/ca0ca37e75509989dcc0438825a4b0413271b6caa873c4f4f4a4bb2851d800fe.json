{"ast":null,"code":"import _objectSpread from\"/home/davide/progetti/timeline-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from\"react\";import{motion}from\"framer-motion\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import\"./App.css\";import supabase from'./supabaseClient';import{fetchNotes,insertNote,updateNote,deleteNoteDB}from'./supabaseAPI';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const containerRef=useRef(null);const[notes,setNotes]=useState(()=>{const saved=localStorage.getItem(\"timeline-notes\");return saved?JSON.parse(saved):[];});const[creatingNote,setCreatingNote]=useState(null);const[editingNote,setEditingNote]=useState(null);const activeNote=creatingNote||editingNote;useEffect(()=>{const loadNotes=async()=>{try{const data=await fetchNotes();setNotes(data);}catch(err){console.error(\"Errore nel caricamento:\",err);}};loadNotes();},[]);useEffect(()=>{if(containerRef.current){containerRef.current.scrollTop=containerRef.current.scrollHeight/2;}},[]);useEffect(()=>{localStorage.setItem(\"timeline-notes\",JSON.stringify(notes));},[notes]);const getYFromDate=dateStr=>{if(!dateStr)return 5000;const inputDate=new Date(dateStr);const today=new Date();inputDate.setHours(0,0,0,0);today.setHours(0,0,0,0);const diffInDays=Math.floor((today-inputDate)/(1000*60*60*24));const pixelsPerDay=10;const centerY=5000;return centerY-diffInDays*pixelsPerDay;};const handleCreateNote=e=>{if(editingNote)return;const rect=containerRef.current.getBoundingClientRect();const x=e.clientX+containerRef.current.scrollLeft-rect.left;const y=e.clientY+containerRef.current.scrollTop-rect.top;setCreatingNote({x,y,title:\"\",description:\"\",tags:\"\",date:\"\",image:null,id:Date.now()});};const handleEditNote=note=>{setEditingNote(_objectSpread({},note));};const saveNote=async()=>{if(editingNote){const updatedNote=_objectSpread(_objectSpread({},editingNote),{},{y:getYFromDate(editingNote.date)});setNotes(prev=>prev.map(n=>n.id===editingNote.id?updatedNote:n));await updateNote(updatedNote);setEditingNote(null);}else{const newNote=_objectSpread(_objectSpread({},creatingNote),{},{y:getYFromDate(creatingNote.date||new Date().toISOString().split(\"T\")[0])});setNotes(prev=>[...prev,newNote]);await insertNote(newNote);setCreatingNote(null);}};const deleteNote=async id=>{setNotes(prev=>prev.filter(n=>n.id!==id));await deleteNoteDB(id);};const updateNotePosition=(id,x,y)=>{const container=containerRef.current;const noteWidth=250;const noteHeight=150;const maxX=container.scrollWidth-noteWidth;const maxY=container.scrollHeight-noteHeight;const clampedX=Math.min(Math.max(0,x),maxX);const clampedY=Math.min(Math.max(0,y),maxY);setNotes(prev=>prev.map(n=>n.id===id?_objectSpread(_objectSpread({},n),{},{x:clampedX,y:clampedY}):n));};const getImageURL=note=>{if(!note.image)return null;if(typeof note.image===\"string\")return note.image;try{return URL.createObjectURL(note.image);}catch(_unused){return null;}};const renderTimelineLabels=()=>{const labels=[];const today=new Date();for(let i=-365*5;i<=0;i+=30){const date=new Date();date.setDate(today.getDate()+i);const labelY=getYFromDate(date.toISOString().split(\"T\")[0]);labels.push(/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",left:\"50%\",top:labelY,transform:\"translateX(-50%)\",fontSize:12,color:\"#888\",background:\"white\",padding:\"2px 6px\",borderRadius:\"4px\"},children:date.toISOString().split(\"T\")[0]},i));}return labels;};return/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,className:\"container\",style:{position:\"relative\",scrollSnapType:\"y mandatory\"},onClick:handleCreateNote,children:[/*#__PURE__*/_jsx(\"div\",{className:\"timeline-line-vertical\"}),renderTimelineLabels(),notes.map(note=>{const centerX=containerRef.current?containerRef.current.clientWidth/2+containerRef.current.scrollLeft:0;const noteWidth=250;//const noteHeight = 150;\nlet lineLeft,lineWidth;if(note.x+noteWidth<centerX){lineLeft=note.x+noteWidth;lineWidth=centerX-(note.x+noteWidth);}else if(note.x>centerX){lineLeft=centerX;lineWidth=note.x-centerX;}else{lineLeft=centerX;lineWidth=0;}const lineTop=note.y+20;return/*#__PURE__*/_jsxs(React.Fragment,{children:[lineWidth>0&&/*#__PURE__*/_jsx(\"div\",{className:\"connector\",style:{left:lineLeft,top:lineTop,width:lineWidth}}),/*#__PURE__*/_jsx(motion.div,{drag:true,dragConstraints:containerRef,dragElastic:0,dragMomentum:false,onDragEnd:(e,info)=>updateNotePosition(note.id,note.x+info.offset.x,note.y+info.offset.y),onDoubleClick:()=>handleEditNote(note),whileHover:{scale:1.03},whileTap:{scale:0.97},transition:{type:\"spring\",stiffness:300,damping:20},className:\"note-wrapper\",style:{top:note.y,left:note.x,width:noteWidth},children:/*#__PURE__*/_jsxs(\"div\",{className:\"note-card\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg mb-1\",children:note.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mb-2 whitespace-pre-wrap\",children:note.description}),getImageURL(note)&&/*#__PURE__*/_jsx(\"img\",{src:getImageURL(note),alt:\"note\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 mb-2\",children:[\"Tags: \",note.tags]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteNote(note.id),className:\"text-red-600 hover:underline text-sm\",children:\"Delete\"})]})})]},note.id);}),activeNote&&/*#__PURE__*/_jsx(\"div\",{className:\"form-wrapper\",style:{position:\"absolute\",top:activeNote.y,left:activeNote.x,width:300,zIndex:20},onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded p-4 space-y-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"border p-1 w-full\",placeholder:\"Title\",value:activeNote.title,onChange:e=>editingNote?setEditingNote(_objectSpread(_objectSpread({},editingNote),{},{title:e.target.value})):setCreatingNote(_objectSpread(_objectSpread({},creatingNote),{},{title:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"border p-1 w-full resize-none\",rows:3,placeholder:\"Description\",value:activeNote.description,onChange:e=>editingNote?setEditingNote(_objectSpread(_objectSpread({},editingNote),{},{description:e.target.value})):setCreatingNote(_objectSpread(_objectSpread({},creatingNote),{},{description:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-1 w-full\",placeholder:\"Tags\",value:activeNote.tags,onChange:e=>editingNote?setEditingNote(_objectSpread(_objectSpread({},editingNote),{},{tags:e.target.value})):setCreatingNote(_objectSpread(_objectSpread({},creatingNote),{},{tags:e.target.value}))}),/*#__PURE__*/_jsx(DatePicker,{selected:activeNote.date?new Date(activeNote.date):null,onChange:date=>{const iso=date.toISOString().split(\"T\")[0];editingNote?setEditingNote(_objectSpread(_objectSpread({},editingNote),{},{date:iso})):setCreatingNote(_objectSpread(_objectSpread({},creatingNote),{},{date:iso}));},maxDate:new Date(),className:\"border p-1 w-full\",placeholderText:\"Seleziona la data\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>editingNote?setEditingNote(_objectSpread(_objectSpread({},editingNote),{},{image:e.target.files[0]})):setCreatingNote(_objectSpread(_objectSpread({},creatingNote),{},{image:e.target.files[0]}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveNote,className:\"px-3 py-1 bg-blue-600 text-white rounded\",children:editingNote?\"Update\":\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCreatingNote(null);setEditingNote(null);},className:\"px-3 py-1 bg-gray-300 rounded\",children:\"Cancel\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:e=>{e.stopPropagation();const rect=containerRef.current.getBoundingClientRect();const x=rect.width/2+containerRef.current.scrollLeft;const y=rect.height/2+containerRef.current.scrollTop;setCreatingNote({x,y,title:\"\",description:\"\",tags:\"\",date:\"\",image:null,id:Date.now()});},children:\"+\"})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","DatePicker","supabase","fetchNotes","insertNote","updateNote","deleteNoteDB","jsx","_jsx","jsxs","_jsxs","App","containerRef","notes","setNotes","saved","localStorage","getItem","JSON","parse","creatingNote","setCreatingNote","editingNote","setEditingNote","activeNote","loadNotes","data","err","console","error","current","scrollTop","scrollHeight","setItem","stringify","getYFromDate","dateStr","inputDate","Date","today","setHours","diffInDays","Math","floor","pixelsPerDay","centerY","handleCreateNote","e","rect","getBoundingClientRect","x","clientX","scrollLeft","left","y","clientY","top","title","description","tags","date","image","id","now","handleEditNote","note","_objectSpread","saveNote","updatedNote","prev","map","n","newNote","toISOString","split","deleteNote","filter","updateNotePosition","container","noteWidth","noteHeight","maxX","scrollWidth","maxY","clampedX","min","max","clampedY","getImageURL","URL","createObjectURL","_unused","renderTimelineLabels","labels","i","setDate","getDate","labelY","push","style","position","transform","fontSize","color","background","padding","borderRadius","children","ref","className","scrollSnapType","onClick","centerX","clientWidth","lineLeft","lineWidth","lineTop","Fragment","width","div","drag","dragConstraints","dragElastic","dragMomentum","onDragEnd","info","offset","onDoubleClick","whileHover","scale","whileTap","transition","type","stiffness","damping","stopPropagation","src","alt","zIndex","placeholder","value","onChange","target","rows","selected","iso","maxDate","placeholderText","accept","files","height"],"sources":["/home/davide/progetti/timeline-app/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./App.css\";\nimport supabase from './supabaseClient';\nimport { fetchNotes, insertNote, updateNote, deleteNoteDB } from './supabaseAPI';\n\nexport default function App() {\n  const containerRef = useRef(null);\n\n  const [notes, setNotes] = useState(() => {\n    const saved = localStorage.getItem(\"timeline-notes\");\n    return saved ? JSON.parse(saved) : [];\n  });\n\n  const [creatingNote, setCreatingNote] = useState(null);\n  const [editingNote, setEditingNote] = useState(null);\n\n  const activeNote = creatingNote || editingNote;\n\n  useEffect(() => {\n    const loadNotes = async () => {\n      try {\n        const data = await fetchNotes();\n        setNotes(data);\n      } catch (err) {\n        console.error(\"Errore nel caricamento:\", err);\n      }\n    };\n    loadNotes();\n  }, []);\n\n  useEffect(() => {\n    if (containerRef.current) {\n      containerRef.current.scrollTop = containerRef.current.scrollHeight / 2;\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"timeline-notes\", JSON.stringify(notes));\n  }, [notes]);\n\n  const getYFromDate = (dateStr) => {\n    if (!dateStr) return 5000;\n    const inputDate = new Date(dateStr);\n    const today = new Date();\n    inputDate.setHours(0, 0, 0, 0);\n    today.setHours(0, 0, 0, 0);\n    const diffInDays = Math.floor((today - inputDate) / (1000 * 60 * 60 * 24));\n    const pixelsPerDay = 10;\n    const centerY = 5000;\n    return centerY - diffInDays * pixelsPerDay;\n  };\n\n  const handleCreateNote = (e) => {\n    if (editingNote) return;\n    const rect = containerRef.current.getBoundingClientRect();\n    const x = e.clientX + containerRef.current.scrollLeft - rect.left;\n    const y = e.clientY + containerRef.current.scrollTop - rect.top;\n    setCreatingNote({\n      x,\n      y,\n      title: \"\",\n      description: \"\",\n      tags: \"\",\n      date: \"\",\n      image: null,\n      id: Date.now(),\n    });\n  };\n\n  const handleEditNote = (note) => {\n    setEditingNote({ ...note });\n  };\n\n  const saveNote = async () => {\n    if (editingNote) {\n      const updatedNote = {\n        ...editingNote,\n        y: getYFromDate(editingNote.date),\n      };\n      setNotes((prev) =>\n        prev.map((n) => (n.id === editingNote.id ? updatedNote : n))\n      );\n      await updateNote(updatedNote);\n      setEditingNote(null);\n    } else {\n      const newNote = {\n        ...creatingNote,\n        y: getYFromDate(creatingNote.date || new Date().toISOString().split(\"T\")[0]),\n      };\n      setNotes((prev) => [...prev, newNote]);\n      await insertNote(newNote);\n      setCreatingNote(null);\n    }\n  };\n\n  const deleteNote = async (id) => {\n    setNotes((prev) => prev.filter((n) => n.id !== id));\n    await deleteNoteDB(id);\n  };\n\n  const updateNotePosition = (id, x, y) => {\n    const container = containerRef.current;\n    const noteWidth = 250;\n    const noteHeight = 150;\n    const maxX = container.scrollWidth - noteWidth;\n    const maxY = container.scrollHeight - noteHeight;\n    const clampedX = Math.min(Math.max(0, x), maxX);\n    const clampedY = Math.min(Math.max(0, y), maxY);\n    setNotes((prev) =>\n      prev.map((n) => (n.id === id ? { ...n, x: clampedX, y: clampedY } : n))\n    );\n  };\n\n  const getImageURL = (note) => {\n    if (!note.image) return null;\n    if (typeof note.image === \"string\") return note.image;\n    try {\n      return URL.createObjectURL(note.image);\n    } catch {\n      return null;\n    }\n  };\n\n  const renderTimelineLabels = () => {\n    const labels = [];\n    const today = new Date();\n    for (let i = -365 * 5; i <= 0; i += 30) {\n      const date = new Date();\n      date.setDate(today.getDate() + i);\n      const labelY = getYFromDate(date.toISOString().split(\"T\")[0]);\n      labels.push(\n        <div\n          key={i}\n          style={{\n            position: \"absolute\",\n            left: \"50%\",\n            top: labelY,\n            transform: \"translateX(-50%)\",\n            fontSize: 12,\n            color: \"#888\",\n            background: \"white\",\n            padding: \"2px 6px\",\n            borderRadius: \"4px\",\n          }}\n        >\n          {date.toISOString().split(\"T\")[0]}\n        </div>\n      );\n    }\n    return labels;\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"container\"\n      style={{ position: \"relative\", scrollSnapType: \"y mandatory\" }}\n      onClick={handleCreateNote}\n    >\n      <div className=\"timeline-line-vertical\" />\n      {renderTimelineLabels()}\n\n      {notes.map((note) => {\n        const centerX = containerRef.current\n          ? containerRef.current.clientWidth / 2 +\n            containerRef.current.scrollLeft\n          : 0;\n        const noteWidth = 250;\n        //const noteHeight = 150;\n\n        let lineLeft, lineWidth;\n        if (note.x + noteWidth < centerX) {\n          lineLeft = note.x + noteWidth;\n          lineWidth = centerX - (note.x + noteWidth);\n        } else if (note.x > centerX) {\n          lineLeft = centerX;\n          lineWidth = note.x - centerX;\n        } else {\n          lineLeft = centerX;\n          lineWidth = 0;\n        }\n\n        const lineTop = note.y + 20;\n\n        return (\n          <React.Fragment key={note.id}>\n            {lineWidth > 0 && (\n              <div\n                className=\"connector\"\n                style={{ left: lineLeft, top: lineTop, width: lineWidth }}\n              />\n            )}\n            <motion.div\n              drag\n              dragConstraints={containerRef}\n              dragElastic={0}\n              dragMomentum={false}\n              onDragEnd={(e, info) =>\n                updateNotePosition(\n                  note.id,\n                  note.x + info.offset.x,\n                  note.y + info.offset.y\n                )\n              }\n              onDoubleClick={() => handleEditNote(note)}\n              whileHover={{ scale: 1.03 }}\n              whileTap={{ scale: 0.97 }}\n              transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n              className=\"note-wrapper\"\n              style={{ top: note.y, left: note.x, width: noteWidth }}\n            >\n              <div className=\"note-card\" onClick={(e) => e.stopPropagation()}>\n                <div className=\"font-bold text-lg mb-1\">{note.title}</div>\n                <div className=\"text-sm mb-2 whitespace-pre-wrap\">\n                  {note.description}\n                </div>\n                {getImageURL(note) && (\n                  <img src={getImageURL(note)} alt=\"note\" />\n                )}\n                <div className=\"text-xs text-gray-600 mb-2\">\n                  Tags: {note.tags}\n                </div>\n                <button\n                  onClick={() => deleteNote(note.id)}\n                  className=\"text-red-600 hover:underline text-sm\"\n                >\n                  Delete\n                </button>\n              </div>\n            </motion.div>\n          </React.Fragment>\n        );\n      })}\n\n      {activeNote && (\n        <div\n          className=\"form-wrapper\"\n          style={{\n            position: \"absolute\",\n            top: activeNote.y,\n            left: activeNote.x,\n            width: 300,\n            zIndex: 20,\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <div className=\"bg-white shadow-lg rounded p-4 space-y-2\">\n            <input\n              className=\"border p-1 w-full\"\n              placeholder=\"Title\"\n              value={activeNote.title}\n              onChange={(e) =>\n                editingNote\n                  ? setEditingNote({ ...editingNote, title: e.target.value })\n                  : setCreatingNote({ ...creatingNote, title: e.target.value })\n              }\n            />\n            <textarea\n              className=\"border p-1 w-full resize-none\"\n              rows={3}\n              placeholder=\"Description\"\n              value={activeNote.description}\n              onChange={(e) =>\n                editingNote\n                  ? setEditingNote({\n                      ...editingNote,\n                      description: e.target.value,\n                    })\n                  : setCreatingNote({\n                      ...creatingNote,\n                      description: e.target.value,\n                    })\n              }\n            />\n            <input\n              className=\"border p-1 w-full\"\n              placeholder=\"Tags\"\n              value={activeNote.tags}\n              onChange={(e) =>\n                editingNote\n                  ? setEditingNote({ ...editingNote, tags: e.target.value })\n                  : setCreatingNote({ ...creatingNote, tags: e.target.value })\n              }\n            />\n            <DatePicker\n              selected={activeNote.date ? new Date(activeNote.date) : null}\n              onChange={(date) => {\n                const iso = date.toISOString().split(\"T\")[0];\n                editingNote\n                  ? setEditingNote({ ...editingNote, date: iso })\n                  : setCreatingNote({ ...creatingNote, date: iso });\n              }}\n              maxDate={new Date()}\n              className=\"border p-1 w-full\"\n              placeholderText=\"Seleziona la data\"\n            />\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={(e) =>\n                editingNote\n                  ? setEditingNote({\n                      ...editingNote,\n                      image: e.target.files[0],\n                    })\n                  : setCreatingNote({\n                      ...creatingNote,\n                      image: e.target.files[0],\n                    })\n              }\n            />\n            <div className=\"flex justify-between pt-2\">\n              <button\n                onClick={saveNote}\n                className=\"px-3 py-1 bg-blue-600 text-white rounded\"\n              >\n                {editingNote ? \"Update\" : \"Save\"}\n              </button>\n              <button\n                onClick={() => {\n                  setCreatingNote(null);\n                  setEditingNote(null);\n                }}\n                className=\"px-3 py-1 bg-gray-300 rounded\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <button\n        className=\"add-btn\"\n        onClick={(e) => {\n          e.stopPropagation();\n          const rect = containerRef.current.getBoundingClientRect();\n          const x = rect.width / 2 + containerRef.current.scrollLeft;\n          const y = rect.height / 2 + containerRef.current.scrollTop;\n          setCreatingNote({\n            x,\n            y,\n            title: \"\",\n            description: \"\",\n            tags: \"\",\n            date: \"\",\n            image: null,\n            id: Date.now(),\n          });\n        }}\n      >\n        +\n      </button>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}